<div>
  <h1 class="font-bold text-4xl">献立表の共有</h1>

  <div class="border border-stone-300 rounded-md p-4 my-5 text-stone-800">
    <strong class="block font-bold text-lg">共有しているユーザー</strong>

    <% @family.users.each do |user| %>
      <p class="my-5 flex items-center">
        <%= image_tag user.icon, class: 'icon' %>
        <span class="ml-2"><%= user.name %></span>
      </p>
    <% end %>

    <p class="my-5">
      <input id="copyTarget" type="text" value="<%= @family.invitation_url(request) %>" readonly autocomplete="off">
      <button class="rounded-lg py-3 px-5 bg-gray-600 text-white inline-block font-medium cursor-pointer" onclick="copyToClipboard()">共有URLをCopyする</button>
    </p>
  </div>
  <%= link_to '献立表へ戻る', meal_plans_path,
              class: 'ml-2 rounded-lg py-3 px-5 text-stone-500 bg-stone-100 inline-block font-medium' %>

  <script>
    function copyToClipboard() {
        // コピー対象をJavaScript上で変数として定義する
        var copyTarget = document.getElementById("copyTarget");

        // コピー対象のテキストを選択する
        copyTarget.select();
        copyTarget.setSelectionRange(0, 99999);

        // 選択しているテキストをクリップボードにコピーする
        document.execCommand("Copy");

        // コピーをお知らせする
        alert("コピーできました！ : " + copyTarget.value);
    }
  </script>
</div>
