<% set_meta_tags title: '会議室' %>
<% set_meta_tags description: '献立の相談を行う会議室です。ここでは献立の提案とコメントを自由に行うことができます。' %>
<%= action_cable_meta_tag %>
<%= turbo_stream_from @meeting_room, 'remarks' %>
<div class="text-sm md:text-base mx-auto p-4 w-full">
  <div class="flex justify-between items-center">
    <%= render 'layouts/title_meal_date', meal_date: @meeting_room.meal_plan.meal_date %>
    <%= render 'meals_modal', meal_plan: @meeting_room.meal_plan %>
  </div>
  <div data-controller="cable-connection" data-target="appearance.status" data-cable-connection-target="status" class="hidden">
    <div class="mb-4 mx-auto flex justify-center">
    </div>
    <div id="remarks">
      <div class="rounded-lg border-2 border-orange-950/40">
        <h2 class="w-full rounded-t-lg pl-4 py-1.5 border-b-2 border-orange-950/40 bg-orange-50">
          <span class="flex items-center text-lg"><%= image_tag('pages/meal.svg', class: 'w-5 text-center mr-1', alt: '食事のマーク') %>献立の提案</span>
        </h2>
        <div class="px-2">
          <%= render 'remarks/proposals', meeting_room: @meeting_room, proposals: @proposals %>
          <%= render 'remarks/new_button', meeting_room: @meeting_room, new_remark_type: 'proposal' %>
        </div>
      </div>
      <div class="mt-4">
        <h2 class="mb-2 flex items-center text-lg">
          <%= image_tag('pages/chat_single.svg', class: 'w-7 text-center', alt: 'コメントのマーク') %>
          <span>コメント</span>
        </h2>
        <div class="grid gap border-b border-dashed border-orange-700/10">
          <%= render 'remarks/comments', meeting_room: @meeting_room, comments: @comments %>
        </div>
        <%= render 'remarks/new_button', meeting_room: @meeting_room, new_remark_type: 'comment' %>
      </div>
    </div>
  </div>
</div>
